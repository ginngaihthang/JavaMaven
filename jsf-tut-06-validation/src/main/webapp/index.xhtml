<!DOCTYPE html > 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"> 

<h:head>
	<title>Product</title>
	<h:outputStylesheet library="webjars" name="bootstrap/5.1.3/css/bootstrap.min.css"></h:outputStylesheet>
		<h:outputStylesheet library="webjars" name="font-awesome/6.1.2/css/all.min-jsf.css"></h:outputStylesheet>
</h:head> 
<body> 	
	<div class="container mt-4">
		<div class="col">
			<h3 class="col-10">Product List</h3>
		<h:link outcome="/product-add" value="Add" styleClass="btn btn-primary"/>
		</div>
		<hr />
		<h:form>
			<h:dataTable binding="#{tbl}" value="#{productBean.products}" var="p" styleClass="table" >
			<h:column>
				<f:facet name = "header" >ID</f:facet>
				#{tbl.rowIndex + 1}
			</h:column>
			<h:column>
				<f:facet name = "header" >Name</f:facet>
				#{p.name}
			</h:column>
			<h:column>
				<f:facet name = "header" >Price</f:facet>
				#{p.price}
			</h:column>
			<h:column>
				<f:facet name = "header" >Expire</f:facet>
				#{p.expireDate}
			</h:column>
			<h:column>
				<f:facet name = "header" >Category</f:facet>
				#{p.category.name}
			</h:column>
			<h:column>
				<f:facet name="header" >Action</f:facet>
				<h:link outcome="/product-add" value="Edit" >
					<f:param name="pId" value="#{p.id}"></f:param>
				</h:link>|
				<h:commandLink action="#{productBean.delete(p.id)}" value="Remove" styleClass="text-danger"/>
			</h:column>
			</h:dataTable>
		</h:form>
	</div>
</body> 
</html>
